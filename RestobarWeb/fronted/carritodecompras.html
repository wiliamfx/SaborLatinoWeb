<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito de Compras</title>
    <link rel="stylesheet" href="carrito.css">
</head>
<body>
    <h1>Carrito de Compras</h1>
    <div class="carrito-container">
        <div class="carrito-header">
            <h2>Tu Carrito</h2>
            <p>Total: S/ <span id="total-precio">0.00</span></p>
        </div>
        <div id="carrito-items">
            <!-- Los productos del carrito se agregarán aquí dinámicamente -->
        </div>
        <div class="carrito-footer">
            <button class="btn" onclick="finalizarCompra()">Finalizar Compra</button>
        </div>
    </div>

    <script>
        let carrito = []; // Array para almacenar los productos en el carrito

        // Función para renderizar los productos en el carrito
        function renderCarrito() {
            const carritoContainer = document.getElementById('carrito-items');
            const totalPrecio = document.getElementById('total-precio');
            carritoContainer.innerHTML = ''; // Limpiar carrito anterior
            let total = 0;

            carrito.forEach((producto, index) => {
                total += producto.precio * producto.cantidad;

                const item = document.createElement('div');
                item.classList.add('carrito-item');

                item.innerHTML = `
                    <div class="carrito-item-info">
                        <img src="${producto.imagen}" alt="${producto.nombre}">
                        <h3>${producto.nombre}</h3>
                        <p>Precio: S/${producto.precio}</p>
                        <p>Cantidad: 
                            <input type="number" min="1" value="${producto.cantidad}" onchange="actualizarCantidad(${index}, this.value)">
                        </p>
                    </div>
                    <button class="btn btn-remove" onclick="eliminarProducto(${index})">Eliminar</button>
                `;

                carritoContainer.appendChild(item);
            });

            totalPrecio.textContent = total.toFixed(2);
        }

        // Función para agregar un producto al carrito
        function addToCart(id, nombre, precio, imagen) {
            const productoExistente = carrito.find(producto => producto.id === id);
            if (productoExistente) {
                productoExistente.cantidad += 1;
            } else {
                carrito.push({ id, nombre, precio, imagen, cantidad: 1 });
            }

            renderCarrito();
        }

        // Función para eliminar un producto del carrito
        function eliminarProducto(index) {
            carrito.splice(index, 1);
            renderCarrito();
        }

        // Función para actualizar la cantidad de un producto
        function actualizarCantidad(index, nuevaCantidad) {
            nuevaCantidad = parseInt(nuevaCantidad);
            if (nuevaCantidad > 0) {
                carrito[index].cantidad = nuevaCantidad;
                renderCarrito();
            }
        }

        // Función para finalizar la compra
        function finalizarCompra() {
            alert('¡Gracias por tu compra!');
            carrito = []; // Vaciar el carrito
            renderCarrito();
        }

        // Ejemplo de cómo agregar un producto para pruebas
        // Puedes borrar estas líneas cuando conectes tu función addToCart real
        addToCart(1, 'Cerveza Artesanal', 12.50, 'http://localhost:3000/imagenes/1');
        addToCart(2, 'Cerveza Corona', 8.50, 'http://localhost:3000/imagenes/2');
    </script>
</body>
</html>
